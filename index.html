<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHF/JPY Signal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        h1 {
            font-size: 24px;
        }
        h2 {
            font-size: 30px;
            font-weight: bold;
            margin-top: 20px;
        }
        .buy {
            color: green;
        }
        .sell {
            color: red;
        }
        .strong-buy {
            color: darkgreen;
            font-size: 20px;
            font-weight: bold;
        }
        .strong-sell {
            color: darkred;
            font-size: 20px;
            font-weight: bold;
        }
        .no-entry {
            color: gray;
        }
    </style>
</head>
<body>
    <h1>CHF/JPY Signal</h1>
    <h2 id="signal" class="no-entry">Loading...</h2>
    <p id="strong-signal"></p> <!-- Strong buy/sell message -->
    <p id="price">CHF/JPY: --</p>
    <p id="time">Last Update: --</p>

    <script>
        async function fetchLiveData() {
            try {
                // Replace with your actual broker API URL
                let response = await fetch("https://api.example.com/chf-jpy-indicators");
                let data = await response.json();

                let price = data.price;
                let indicators = data.indicators; // Array of 7 indicators
                
                document.getElementById('price').innerText = "CHF/JPY: " + price;
                document.getElementById('time').innerText = "Last Update: " + new Date().toLocaleTimeString();
                
                let signalElement = document.getElementById('signal');
                let strongSignalElement = document.getElementById('strong-signal');

                let { signal, strongSignal } = determineSignal(indicators);

                if (signal === "Buy") {
                    signalElement.innerText = "BUY";
                    signalElement.className = "buy";
                } else if (signal === "Sell") {
                    signalElement.innerText = "SELL";
                    signalElement.className = "sell";
                } else {
                    signalElement.innerText = "No Entry";
                    signalElement.className = "no-entry";
                }

                if (strongSignal === "Strong Buy") {
                    strongSignalElement.innerText = "Strong Buy";
                    strongSignalElement.className = "strong-buy";
                } else if (strongSignal === "Strong Sell") {
                    strongSignalElement.innerText = "Strong Sell";
                    strongSignalElement.className = "strong-sell";
                } else {
                    strongSignalElement.innerText = ""; // Clear strong signal if none
                }

            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        function determineSignal(indicators) {
            let buySignals = indicators.filter(i => i === "Buy").length;
            let sellSignals = indicators.filter(i => i === "Sell").length;

            let signal = "No Entry";
            let strongSignal = "";

            if (buySignals >= 5) {
                signal = "Buy";
                if (buySignals === 7) strongSignal = "Strong Buy";
            } else if (sellSignals >= 5) {
                signal = "Sell";
                if (sellSignals === 7) strongSignal = "Strong Sell";
            }

            return { signal, strongSignal };
        }

        // Fetch data every 5 seconds
        fetchLiveData();
        setInterval(fetchLiveData, 5000);
    </script>
</body>
</html>
