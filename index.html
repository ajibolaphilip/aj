<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHF/JPY Signal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        h1 {
            font-size: 24px;
        }
        h2 {
            font-size: 30px;
            font-weight: bold;
            margin-top: 20px;
        }
        .buy {
            color: green;
        }
        .sell {
            color: red;
        }
        .no-entry {
            color: gray;
        }
    </style>
</head>
<body>
    <h1>CHF/JPY Signal</h1>
    <h2 id="signal" class="no-entry">Loading...</h2>
    <p id="price">Price: --</p>
    <p id="entry-price">2 Min Entry: --</p>
    <p id="live-time">Live Time: --</p>

    <script>
        let apiKey = "QV4meEvpkka6gRug28"; // TradeMade API Key
        let entryPrice = null;
        let lastSignal = "No Entry";

        function fetchLivePrice() {
            fetch(`https://api.trademade.com/forex/live?pair=CHFJPY&api_key=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.price) {
                        let price = parseFloat(data.price);
                        updateDisplay(price);
                    } else {
                        console.error("Invalid API response:", data);
                    }
                })
                .catch(error => console.error("Error fetching data:", error));
        }

        function updateDisplay(price) {
            document.getElementById("price").innerText = `Price: ${price.toFixed(3)}`;
            document.getElementById("live-time").innerText = `Live Time: ${new Date().toLocaleTimeString()}`;

            if (entryPrice === null) {
                entryPrice = price; // Set entry price initially
            }

            document.getElementById("entry-price").innerText = `2 Min Entry: ${entryPrice.toFixed(3)}`;

            let signal = determineSignal(price);

            if (signal !== lastSignal) {
                document.getElementById("signal").innerText = signal;
                document.getElementById("signal").className = signal === "BUY" ? "buy" : signal === "SELL" ? "sell" : "no-entry";
                lastSignal = signal;
            }
        }

        function determineSignal(price) {
            if (price > entryPrice + 0.05) {
                return "BUY";
            } else if (price < entryPrice - 0.05) {
                return "SELL";
            } else {
                return "No Entry";
            }
        }

        setInterval(fetchLivePrice, 1000); // Fetch data every second
    </script>
</body>
</html>
