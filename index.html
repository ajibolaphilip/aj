<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHF/JPY Signal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        h1 {
            font-size: 24px;
        }
        h2 {
            font-size: 30px;
            font-weight: bold;
            margin-top: 20px;
        }
        .buy {
            color: green;
        }
        .sell {
            color: red;
        }
        .strong-buy {
            color: darkgreen;
            font-size: 20px;
            font-weight: bold;
        }
        .strong-sell {
            color: darkred;
            font-size: 20px;
            font-weight: bold;
        }
        .no-entry {
            color: gray;
        }
    </style>
</head>
<body>
    <h1>CHF/JPY Signal</h1>
    <h2 id="signal" class="no-entry">Loading...</h2>
    <p id="strong-signal"></p> <!-- Strong buy/sell message -->
    <p id="price">CHF/JPY: --</p>
    <p id="time">Last Update: --</p>

    <script>
        let buyCount = 0;
        let sellCount = 0;
        const requiredUpdates = 36; // 36 updates = 3 minutes

        function fetchLivePrice() {
            // Simulated live price (replace with actual API fetch)
            let price = (167.7 + Math.random() * 0.8).toFixed(3); // Random price for demo
            
            document.getElementById('price').innerText = "CHF/JPY: " + price;
            document.getElementById('time').innerText = "Last Update: " + new Date().toLocaleTimeString();
            
            let signalElement = document.getElementById('signal');
            let strongSignalElement = document.getElementById('strong-signal');

            let { signal } = determineSignal(price);

            if (signal === "Buy") {
                signalElement.innerText = "BUY";
                signalElement.className = "buy";
                buyCount++;
                sellCount = 0; // Reset sell counter if trend changes
            } else if (signal === "Sell") {
                signalElement.innerText = "SELL";
                signalElement.className = "sell";
                sellCount++;
                buyCount = 0; // Reset buy counter if trend changes
            } else {
                signalElement.innerText = "No Entry";
                signalElement.className = "no-entry";
                buyCount = 0;
                sellCount = 0;
            }

            // Show Strong Buy/Sell only if trend continues for 3 minutes
            if (buyCount >= requiredUpdates) {
                strongSignalElement.innerText = "Strong Buy";
                strongSignalElement.className = "strong-buy";
            } else if (sellCount >= requiredUpdates) {
                strongSignalElement.innerText = "Strong Sell";
                strongSignalElement.className = "strong-sell";
            } else {
                strongSignalElement.innerText = ""; // Clear strong signal if not confirmed
            }
        }

        function determineSignal(price) {
            price = parseFloat(price);
            let signal = "No Entry";

            if (price > 168.1) {
                signal = "Buy";
            } else if (price < 167.9) {
                signal = "Sell";
            }

            return { signal };
        }

        // Fetch data every 5 seconds
        fetchLivePrice();
        setInterval(fetchLivePrice, 5000);
    </script>
</body>
</html>
